---
title: "MembraneAutomata"
date: 2022-07-30T17:47:03+09:00
draft: true
---

![](/images/membraneautomata_000.png)

これは確か学生の頃、連休中に思い立って書き上げたMacアプリケーションです。
10年以上前の実装にも関わらず現行マシンで問題なくコンパイルできました。実装言語のObjective-CとCに大きな更新がなかったためかな？
当時はパターンが収束してしまうことがわかって触るのをやめてしまったのですが、モデル自体の筋はいい気がするのでパラメータを変えて自動探索にかけたらよいのでは

---

## はじめに
この作品は、生命のもつ予測不能性を再現するという大極的なテーマのなかで、特に恒常性の創発に主眼を置いて作ったものです。予測不可能性という制約のもとで設計するために、実現したい現象（ここでは恒常性）を直接実装するのではなく、下位の現象を実装することを介して、実現したい上位の現象を創発する、という手法をとります。

## 概要
セルオートマトンはConway's Game of Life[^1]に代表されるように、単純なモデルを比較的少ない計算量で実行できる便利な計算モデルです。しかしパターンの恒常性の観点から考えると、ひとつのセルの状態が反転しただけで崩壊するような不安定なモデルに恒常性をもたせるのは困難です。MembraneAutomataでは近傍半径を増やすことで頑強なパターン構築を可能にしました。そしてそのモデルの上で、恒常性のある領域を外界から隔離するための泡状の構造が現れる簡易化学モデルを実装しました。

*^1: [Conway's Game of Life - Wikipedia](https://en.wikipedia.org/wiki/Conway's_Game_of_Life)*

## 要件
### 系の要件
- a. 比較的単純かつ小規模な計算で実現できること
- b. 現れるパターンがConway's Game of Lifeより安定していること

a.モデルの単純さと計算しやすさの要件からセルオートマトンを選択し、b.パターン安定の要件から近傍半径を増やして近傍セルひとつあたりのパターンへの影響度を小さくすることにしました[^2]。

*^2: Multiple Neighbourhood Cellular Automata (MNCA)と呼ばれる。[Understanding Multiple Neighbourhood Cellular Automata](https://slackermanz.com/understanding-multiple-neighborhood-cellular-automata/)*

### セルオートマトンのルール要件
- c. 恒常性をもつパターンが発生しうること
  - c1. 系全体では、自然な行いに任せていると秩序が失われること（現実世界でのエントロピーの増大則と同等の仕組み）
  - c2. そのような系のなかで、外界に影響されない区画が存在すること
    - c21. その区画の境界部分が外界の影響を打ち消し、内部に伝えない役割を果たすこと

現実の現象を参考にこれらの要件を満たすルールを考えると、水中の油滴、あるいは泡を抽象化することで理解しやすいモデルを作れそうに思えます。泡状のパターンの境界付近で外界の影響を打ち消し、内部に恒常性をつくる、という構造です。

## 実装仕様
実装: [MembraneAutomata - GitHub](https://github.com/mitsuyoshi-yamazaki/MembraneAutomata)

### MNCAの実装
MembraneAutomataで実装するMNCAは近傍半径を2以上に拡張したものです。自セルの次の状態に影響する近傍セル数 `n` 近傍半径を `r` と置いたとき

`n = (r * (r + 1)) * 4`

と表せます。

![](/images/membraneautomata_001.png)

その他の仕様はConway's Game of Lifeを踏襲し、自セルの次の状態は、自セルの現在の状態と近傍セルの現在の状態の合計値から決定します。

### MembraneAutomataモデル（セルオートマトンのルール）
このモデルでは、セルの状態を物質のメタファーとして表します。ある状態が

状態ごとに「その状態を新たに生成 or その状態を保つ条件」と「」

- 泡状の構造が生成されるようにする
- 系全体では、自然な行いに任せていると秩序が失われること



セルオートマトンにおいて、同質の状態が塊をつくる（水と油を混ぜた場合のような）現象を実装するのは難しくありません。また、その境界部分にのみ発生する特別な状態（つまり泡の膜面）や、片方の状態内でのみ持続可能な状態をつくることも比較的容易です。

1. 水中の油滴
2. 境界面を追加し、泡にする
3. 内部構造を追加し、内部構造をもつ泡にする

という順序でルールを追加していけば、要件を満たすモデルを作成できます。

![](/images/membraneautomata_002.png)


- 状態の生成と分解ルール
  - 全ての状態に"分解先"状態がある（最も祖の2状態は互いを分解先にする）
- ルールは互いに重複可能（優先順位順に適用される）

## 結果

## Future work
- モデルの欠点
  - 化学反応を手動で設定しているので継続的に探索を行えない


---
# Memo


- what 
  - MNCA & 簡易化学モデル
- objective
  - OEEを実現できる柔軟な物理法則モデルの作成
  - 泡状の現象により恒常性を可能にする
- どうだったか
  - 現行のパラメータでは収束してしまった
  - 計算量は良さそう（良さそうとは？
  - モデルは明快
  - 泡状の現象により恒常性を可能にする
    - 外界の影響を受けない層を設ければ恒常性の維持は用意（トートロジーだが）
      - 逆に環境との/への作用どーすんの
- 泡状の構造が自ずと現れる化学モデル→合成と分解

## References
- https://slackermanz.com/understanding-multiple-neighborhood-cellular-automata/